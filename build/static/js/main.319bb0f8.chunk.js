(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(1),u=t.n(c),r=t(16),a=t.n(r),o=(t(21),t(3)),i=t(0),s=function(e){var n=e.value,t=e.onChange;return Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:n,onChange:t})]})},d=function(e){var n=e.onSubmit,t=e.valueName,c=e.valueNumber,u=e.onChangeName,r=e.onChangeNumber;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsx)("br",{}),Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:u})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:c,onChange:r})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.name,t=e.number,c=e.id,u=e.deletePerson;return Object(i.jsxs)("div",{children:[n," ",t,Object(i.jsxs)("span",{children:[" ",Object(i.jsx)("button",{onClick:function(){return u(c)},children:"Delete"})]})]})},b=function(e){var n=e.persons,t=e.searchName,c=e.deletePerson,u=n.filter((function(e){return e.name.toLowerCase().includes(t)}));return Object(i.jsx)("div",{className:"Listings",children:u.map((function(e){var n=e.name,t=e.number,u=e.id;return Object(i.jsx)(l,{name:n,number:t,id:u,deletePerson:c},u)}))})},j=t(4),f=t.n(j),h="/api/persons",m=function(){return f.a.get(h).then((function(e){return e.data}))},v=function(e){return f.a.post(h,e).then((function(e){return e.data}))},O=function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.status}))},x=function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.status}))},p=(t(41),function(e){var n=e.message;return null===n?null:n.includes("added")||n.includes("updated")?Object(i.jsx)("div",{className:"valid",children:n}):Object(i.jsx)("div",{className:"error",children:n})}),g=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],r=Object(c.useState)(""),a=Object(o.a)(r,2),l=a[0],j=a[1],f=Object(c.useState)(""),h=Object(o.a)(f,2),g=h[0],C=h[1],N=Object(c.useState)(""),w=Object(o.a)(N,2),S=w[0],k=w[1],P=Object(c.useState)(null),T=Object(o.a)(P,2),y=T[0],D=T[1];Object(c.useEffect)((function(){m().then((function(e){u(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(p,{message:y}),Object(i.jsx)(s,{value:S,onChange:function(e){k(e.target.value)}}),Object(i.jsx)("h2",{children:"Add a new"}),Object(i.jsx)(d,{onSubmit:function(e){e.preventDefault();var n=t.some((function(e){return e.name===l}));if(n){var c=window.confirm("".concat(l," has already ")+"been added to the phonebook, would you like to replace old number with new one?"),r=t.find((function(e){return e.name===l}));return r.number=g,c&&x(r.id,r).then((function(e){200===e&&D("".concat(r.name," has been updated ")),setTimeout((function(){return D(null)}),2e3)})).catch((function(e){D("".concat(r.name," was already removed from server")),setTimeout((function(){return D(null)}),2e3),u(t.filter((function(e){return e.id!==r.id})))})),j(""),void C("")}var a={name:l,number:g};v(a).then((function(e){u(t.concat(e)),j(""),C(""),D("".concat(a.name," has been added")),setTimeout((function(){return D(null)}),2e3)}))},valueName:l,valueNumber:g,onChangeName:function(e){j(e.target.value)},onChangeNumber:function(e){C(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(b,{persons:t,searchName:S,deletePerson:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ? "))&&O(e).then((function(c){200===c&&(D("".concat(n.name," has been deleted")),setTimeout((function(){return D(null)}),2e3)),u(t.filter((function(n){return n.id!==e})))}))}}),"..."]})},C=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,43)).then((function(n){var t=n.getCLS,c=n.getFID,u=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),c(e),u(e),r(e),a(e)}))};a.a.render(Object(i.jsx)(u.a.StrictMode,{children:Object(i.jsx)(g,{})}),document.getElementById("root")),C()}},[[42,1,2]]]);
//# sourceMappingURL=main.319bb0f8.chunk.js.map